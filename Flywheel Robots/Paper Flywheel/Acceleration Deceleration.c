#pragma config(UART_Usage, UART1, uartVEXLCD, baudRate19200, IOPins, None, None)
#pragma config(UART_Usage, UART2, uartNotUsed, baudRate4800, IOPins, None, None)
#pragma config(I2C_Usage, I2C1, i2cSensors)
#pragma config(Sensor, in1,    powerExpander,  sensorNone)
#pragma config(Sensor, dgtl12, led,            sensorLEDtoVCC)
#pragma config(Sensor, I2C_1,  ,               sensorQuadEncoderOnI2CPort,    , AutoAssign )
#pragma config(Sensor, I2C_2,  ,               sensorQuadEncoderOnI2CPort,    , AutoAssign )
#pragma config(Sensor, I2C_3,  ,               sensorQuadEncoderOnI2CPort,    , AutoAssign )
#pragma config(Motor,  port1,           rFlyTop,       tmotorVex393_HBridge, openLoop)
#pragma config(Motor,  port2,           rFlyBottom,    tmotorVex393_MC29, openLoop, encoderPort, I2C_1)
#pragma config(Motor,  port4,           lFlyTop,       tmotorVex393_MC29, openLoop, encoderPort, None)
#pragma config(Motor,  port5,           lFlyBottom,    tmotorVex393_MC29, openLoop, reversed, encoderPort, I2C_2)
#pragma config(Motor,  port7,           intake,        tmotorVex393_MC29, openLoop, encoderPort, I2C_3)
#pragma config(DatalogSeries, 0, "", Properties, nPgmTime, , 50)
#pragma config(DatalogSeries, 1, "", Motors, MotorPower, port1, 50)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

void setLFly(int output)
{
	motor[lFlyTop] = output;
	motor[lFlyBottom] = output;
}

void setRFly(int output)
{
	motor[rFlyTop] = output;
	motor[rFlyBottom] = output;
}

void accelerate() {
	float speed = 0;
	time1[T1] = 0;
	while (speed < 75) {
		float currentTime = time1[T1]/1000.;
		speed = 1.76827*pow(currentTime,2) + 2.92692*currentTime + 35;
		setLFly(speed);
		setRFly(speed);
		wait1Msec(25);
	}
}

void decelerate() {
	float speed = 75;
	time1[T1] = 0;
	while (speed > 0) {
		float currentTime = time1[T1]/1000.;
		speed = -5.43848*currentTime + 75;
		setLFly(speed);
		setRFly(speed);
		wait1Msec(25);
	}
		setLFly(0);
		setRFly(0);
}

//right side decelerates in 8.68 s
//left side decelerates in 6.03 s
//avg = 7.355
task main()
{
	accelerate();
	writeDebugStreamLine("Up to speed");
	wait1Msec(7000);
	writeDebugStreamLine("Stopping 2 sec");
	wait1Msec(2000);
	writeDebugStreamLine("Stopping 1 sec");
	wait1Msec(1000);
	writeDebugStreamLine("Stopping");
	decelerate();


}
